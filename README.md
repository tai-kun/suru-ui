# suru-ui

Web 標準 API と有限ステートマシン、React を活用した UI コンポーネントライブラリの実験的な実装。

[![Test](https://github.com/tai-kun/suru-ui/actions/workflows/test.yaml/badge.svg)](https://github.com/tai-kun/suru-ui/actions/workflows/test.yaml)
[![Release on NPM](https://github.com/tai-kun/suru-ui/actions/workflows/release.yaml/badge.svg)](https://github.com/tai-kun/suru-ui/actions/workflows/release.yaml)
[![Canary Release on NPM](https://github.com/tai-kun/suru-ui/actions/workflows/canary-release.yaml/badge.svg)](https://github.com/tai-kun/suru-ui/actions/workflows/canary-release.yaml)

[![npm version](https://img.shields.io/npm/v/suru-ui)](https://www.npmjs.com/package/suru-ui)
[![npm canary version](https://img.shields.io/npm/v/suru-ui/canary)](https://www.npmjs.com/package/suru-ui?activeTab=versions)

[![License: MIT](https://img.shields.io/badge/License-MIT-red.svg)](https://opensource.org/licenses/MIT)

## 考えていること

### これまでの自分の Web アプリケーション開発における課題の認識

従来、HTML 要素で発生するあらゆるイベントは React のライフサイクルが管理し、API を通じて JavaScript で (ほぼ) 完全に制御されてきた。コードが状態を従い、目の前のコードがすべてであるという設計は、Web アプリケーションをコードで明白に理解できる一方で、不必要に複雑化してしまう問題を抱えている。開発者ツールを使わない限りは意図した動作を (後方互換性も含めて) 保証するための策と解釈することで納得できるが、Web にはすでに標準機能としてフォーム検証が存在し、今後は最上位レイヤーや Popover API、CSS Anchor Positioning など、JavaScript で表現・制御 (開閉やアクセシビリティ、フォーカストラップなど) してきた一部の機能も標準になろうとしている。

### React の鞘に収まる標準 API の使い方

React は極めて捨てがたいフレームワークだが、ちまちま useState したり、Context.Provider でちょっと楽なバケツリレー (宛先のない投げ渡し) をポリポリ書くのは面倒に感じてくることもある。捨てる・捨てないではなく取捨選択したい (が、現状多くの UI コンポーネントライブラリはフレームワークと強く結びつきすぎているし、htmx のように振り切るのも悩ましい)。

このような経緯と個人的なお気持ちから、通常は見捨てられることのない後方互換性とともに広域なプラットフォームのサポートや JavaScript による完全な制御を諦め、ブラウザのイベントにある程度身を任せた UI コンポーネントを検討したい。

### 有限ステートマシンによる制御の可能性

JavaScript による完全な制御を諦めることはすなわち標準 API の利用許可を得たということだが、その場合コンポーネントの props に絶対的な支配権は無く、こうあったらいいな程度の弱い意味しか持たない場面がでてくるため、ブラウザのイベントに身を任せつつ props の要求にも可能な限り対応するコストが重くなってくる。そこで props の変更もある種の cancelable なイベントとみなして標準 API のイベントとともに有限ステートマシンによる状態遷移の定義へ落とし込み、制御できるか実験する。

有限ステートマシンは有名なところだと Chakra UI が提供する Zag で活用されている。Zag の場合は React 以外にも Vue や Solid といった異なるフレームワークの違いを吸収するのが有限ステートマシンを使う動機になっているようだが、論理的に異なる文脈で発生するイベントに従う状態遷移の表現という意味では、今回のケースにもはまってくれるだろうと考えている。

### まとめ

今回の実験を通して、ブラウザのイベントに身を任せた UI コンポーネント開発の可能性を探り、従来の React 開発と比較検討することで、より単純で効率的な開発方法を確立したいと考えている。

## TODO

### base

| コンポーネント名           | 状況 | モバイル対応 | 説明 |
| :--------------------- | :-: | :-------: | :-- |
| ButtonBase             | ✅  |           | ボタンの基本的な実装とスタイルを提供します。様々な種類のボタンを作成するために使用できます。 |
| DialogBase             | ✅  |           | ダイアログの基本的な実装とスタイルを提供します。モーダルダイアログやアラートダイアログなど、様々な種類のダイアログを作成するために使用できます。 |
| PopoverBase            | ✅  |           | Popover API を利用したポップオーバーの基本的な実装とスタイルを提供します。ツールチップやメニューなど、様々な種類のポップオーバーを作成するために使用できます。 |

### core

| コンポーネント名           | 状況 | モバイル対応 | 説明 |
| :--------------------- | :-: | :-------: | :-- |
| Accordion              |     |           | 複数のパネルを折りたたみ式で表示することができます。 |
| Alert                  |     |           | 画面端にアラートメッセージを表示するコンポーネントです。情報、警告、エラーなど、様々な種類のメッセージを表示することができます。 |
| AlertDialog            |     |           | モーダルダイアログとして表示されるコンポーネントです。重要なメッセージや確認メッセージを表示する際に使用されます。 |
| Breadcrumbs            |     |           | パンくずリストです。現在のページの位置を視覚的に示すことができます。 |
| Button                 |     |           | 様々なスタイルのバリエーションを持つボタンです。クリックイベントなどを処理することができます。 |
| Checkbox               |     |           | チェックボックスコンです。オン/オフを切り替えることができます。 |
| Dialog                 |     |           | ウィンドウにオーバーレイされるモーダルダイアログです。背後にあるコンテンツはすべて不活性化されます。 |
| Divider                |     |           | コンテンツを区切るための仕切り線です。 |
| Drawer                 |     |           | 画面端に表示されるドロワーメニューコンポーネントです。ナビゲーションメニューなどに使用されます。 |
| Heading                |     |           | 見出しテキストを表示するコンポーネントです。H1 から H5 までのサイズを設定することができます。 |
| Icon                   |     |           | アイコンを表示するコンポーネントです。`suru-ui/icons` で提供されるアイコンの定義をレンダリングします。 |
| IconButton             |     |           | アイコン付きのボタンです。クリックイベントなどを処理することができます。 |
| InlineAlert            |     |           | インラインでアラートが表示されるコンポーネントです。短いメッセージを表示する際に使用されます。 |
| Label                  |     |           | テキストラベルを表示するコンポーネントです。フォーム入力欄などに使用されます。 |
| Link                   |     |           | リンクを作成するコンポーネントです。内部リンクや外部リンクを設定することができます。利便性のために不活性用の `disabled` 属性を持ちます。 |
| Loader                 |     |           | 読み込みアニメーションを表示するコンポーネントです。データ読み込み中などの待ち時間に表示されます。 |
| Menu                   |     |           | リスト形式のドロップダウンメニューです。 |
| MenuList               |     |           | 階層化されたリストを表示するコンポーネントです。 |
| Pagination             |     |           | ページ送りの機能を提供するコンポーネントです。複数ページにわたるコンテンツを分割して表示することができます。 |
| Popover                |     |           | トリガーの周囲に浮かぶ非モーダルダイアログです。ユーザーにコンテキスト情報を表示するために使用され、クリック可能なトリガー要素を組み合わせて使います。 |
| ProgressBar            |     |           | ファイルのダウンロードや画像のアップロードなどのタスクの進行状況を線形に示すために使用できます。 |
| ProgressCircle         |     |           | ファイルのダウンロードや画像のアップロードなどのタスクの進行状況を円形に示すために使用できます。 |
| Radio                  |     |           | ラジオボタンです。複数選択肢から1つを選択することができます。 |
| Select                 |     |           | ドロップダウンのリストコンポーネントです。リストの中から1つの項目を選択することができます。 |
| Suppl                  |     |           | 補足的な情報を表示するコンポーネントです。 |
| Text                   |     |           | テキストを表示するコンポーネントです。様々なスタイルを設定することができます。 |
| TextArea               |     |           | 複数行のテキストを入力できるコンポーネントです。 |
| TextField              |     |           | 1 行のテキストを入力できるコンポーネントです。 |

### lab

| コンポーネント名           | 状況 | モバイル対応 | 説明 |
| :--------------------- | :-: | :-------: | :-- |
| Avatar                 |     |           | プロフィール画像などを表示するアバターコンポーネントです。 |
| Badge                  |     |           | アイコンやテキストの上にバッジを表示するコンポーネントです。新着情報などを表示する際に使用されます。 |
| Clipboard              |     |           | テキストをクリップボードにコピーする機能を提供するコンポーネントです。 |
| CloseButton            |     |           | 閉じるボタンを表示するコンポーネントです。ダイアログやポップオーバーなどを閉じる際に使用されます。 |
| ContextualHelp         |     |           | ポップオーバーなどを用いて、マウスホバーまたはタッチで操作方法や説明を表示することができます。 |
| DataTable              |     |           | データをテーブル形式を表示するコンポーネントです。ソートやフィルタリングなどの機能を備えています。 |
| DateField              |     |           | 日付用の入力コンポーネントです。 |
| InlineBadge            |     |           | インラインで表示されるバッジコンポーネントです。 |
| Keyboard               |     |           | ショートカットキーなどのキーボード操作を受け付けることを表すコンポーネントです。 |
| Menubar                |     |           | 複数の連続に並んだ `Menu` コンポーネントをまとめて表示するコンポーネントです。 |
| Meter                  |     |           | メーターゲージを表示するコンポーネントです。 |
| NumberField            |     |           | 数値用の入力コンポーネントです。 |
| PasswordField          |     |           | パスワード用の入力コンポーネントです。 |
| RangeSlider            |     |           | 範囲を指定するためのスライダーコンポーネントです。 |
| SearchField            |     |           | 検索用の入力コンポーネントです。 |
| Skeleton               |     |           | コンテンツの読み込み中に表示されるプレースホルダーコンポーネントです。 |
| Slider                 |     |           | 数値を指定するためのスライダーコンポーネントです。 |
| Switch                 |     |           | オン/オフを切り替えるスイッチコンポーネントです。 |
| TableGrid              |     |           | テーブル形式でグリッド表示するコンポーネントです。 |
| Tabs                   |     |           | タブ形式でコンテンツを切り替えるコンポーネントです。 |
| Tag                    |     |           | タグを表示するコンポーネントです。ラベルや分類などに使用されます。 |
| TimeField              |     |           | 時刻用の入力コンポーネントです。 |
| Toggle                 |     |           | オン/オフで表示するコンポーネントを切り替えるトグルコンポーネントです。 |
| Tooltip                |     |           | ツールチップを表示するコンポーネントです。ホバー時に説明文などを表示することができます。 |
| TreeView               |     |           | ツリービューを表示するコンポーネントです。階層構造のデータを可視化することができます。 |
